{% extends 'baseuser.html' %}
{% load crispy_forms_tags %}
{% block content %}
{% load static %}


<link rel="stylesheet" href="https://unpkg.com/xzoom/dist/xzoom.css">
<link rel="stylesheet" href="https://unpkg.com/xzoom/dist/xzoom.css">
<div class="breadcrumbs">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 col-md-6 col-12">
                <div class="breadcrumbs-content">
                    <h1 class="page-title">Single Product</h1>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-12">
                <ul class="breadcrumb-nav">
                    <li><a href="{% url 'userpage' %}"><i class="lni lni-home"></i>
                            Home</a></li>
                    <li><a href="{% url 'userpage' %}">Shop</a></li>
                    <li>Single Product</li>
                </ul>
            </div>
        </div>
    </div>
</div>


<section class="item-details section">
    <div class="container">
        <div class="top-area">
            <div class="row align-items-center">
                <div class="col-lg-6 col-md-12 col-12">
                    <div class="product-images">
                        <main id="gallery">
                            <div class="main-img w-75">
                                <img class="xzoom" id="current" src="{{ obj.product_image1.url }}" xoriginal="{{ obj.product_image1.url }}" />
                                <!-- <img
                                    src="{{obj.product_image1.url}}"
                                    id="current" alt="#"> -->
                            </div>
                            <div class="images xzoom-thumbs">
                                <a href="{{ obj.product_image1.url }}">
                                    <img class="img xzoom-gallery" width="80" src="{{ obj.product_image1.url }}"  xpreview="path/to/preview_image_01.jpg">
                                  </a>
                                  <a href="{{ obj.product_image2.url }}">
                                    <img class="img xzoom-gallery" width="80" src="{{ obj.product_image2.url }}">
                                  </a>
                                  <a href="{{ obj.product_image3.url }}">
                                    <img class="img xzoom-gallery" width="80" src="{{ obj.product_image3.url }}">
                                  </a>
                                  <a href="{{ obj.product_image4.url }}">
                                    <img class="img xzoom-gallery" width="80" src="{{ obj.product_image4.url }}">
                                  </a>
            
        
                               
                            </div>
                        </main>
                    </div>
                </div>

              



                <div class="col-lg-6 col-md-12 col-12">
                    <div class="product-info">
                        <h2 class="title">{{obj.product_name}}</h2>
                        <p class="category"><i class="lni lni-tag"></i> {{obj.category}}</a></p>
                        {% if obj.discount_percentage %}
                        <span class="sale-tag">{{obj.discount_percentage}}%</span>
                        {% endif %}
                        {% if obj.price < obj.mrp_price and obj.price != 0  %}
                        <span style="color : black;">₹{{obj.price}}</span>
                        <span>&nbsp;</span><span style="text-decoration: line-through; color:#696969 ; font-size: 0.8rem;" >₹{{obj.mrp_price}}</span>
                        {% else %}
                        <span style="color : black;">₹{{obj.mrp_price}}</span>
                        {% endif %} 
                        {% if obj.discount_percentage  %}
                        <span style="color : black;">{{obj.discount_percentage}}%</span>
                      
                        {% endif %}
                        <p class="info-text">{{obj.description}}</p>
                        <!-- <div class="row">
                            <div class="col-lg-4 col-md-4 col-12">
                                <div class="form-group color-option">
                                    <label class="title-label"
                                        for="size">Choose color</label>
                                    <div class="single-checkbox
                                        checkbox-style-1">
                                        <input type="checkbox"
                                            id="checkbox-1" checked>
                                        <label for="checkbox-1"><span></span></label>
                                    </div>
                                    <div class="single-checkbox
                                        checkbox-style-2">
                                        <input type="checkbox"
                                            id="checkbox-2">
                                        <label for="checkbox-2"><span></span></label>
                                    </div>
                                    <div class="single-checkbox
                                        checkbox-style-3">
                                        <input type="checkbox"
                                            id="checkbox-3">
                                        <label for="checkbox-3"><span></span></label>
                                    </div>
                                    <div class="single-checkbox
                                        checkbox-style-4">
                                        <input type="checkbox"
                                            id="checkbox-4">
                                        <label for="checkbox-4"><span></span></label>
                                    </div>
                                </div>
                            </div>
                         
                            <div class="col-lg-4 col-md-4 col-12">
                                <div class="form-group quantity">
                                    <label for="color">Quantity</label>
                                    <select class="form-control">
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                    </select>
                                </div>
                            </div>
                        </div> -->
                        <div class="bottom-content">
                            <div class="row align-items-end">
                                <div class="col-lg-4 col-md-4 col-12">
                                    <div class="button cart-button">
                                        {% if obj.stocks <= 0 %}
                                        <h5 class=text-danger style="padding: 10px;">Out Of Stock</h5>
                                        {% else %}
                                       <a href="{% url 'add_cart' obj.id %}"> <button  class="btn btn-primary" style="width: 100%; padding: 10px;"><i class="lni lni-cart"></i>Add to Cart</button></a>
                                        {% endif %}
                                    </div>
                                </div>
                               
                                <div class="col-lg-4 col-md-4 col-12">
                                    <div class="wish-button">
                                        {% if obj.id in p %}
                                    <button class="btn"  id="hmAddtoWishlistBtn"   onclick="removeWishItem('{{obj.id}}')" >  <i class="fa fa-heart" ></i>   In Wish   </button>
                                    {% else %}
                                    <button class="btn"  id="hmAddtoWishlistBtn"   onclick="wishList('{{obj.id}}')" >  <i class="fa fa-heart" ></i>  Add to Wish    </button>
                                    {% endif %}
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="product-details-info">
            <div class="single-block">
                <div class="row">
                    <div class="col-lg-6 col-12">
                        <div class="info-body custom-responsive-margin">
                            <h4>Details</h4>
                            <p>{{obj.description}}</p>
                            <!-- <h4>Features</h4>
                            <ul class="features">
                                <li>Capture 4K30 Video and 12MP Photos</li>
                                <li>Game-Style Controller with
                                    Touchscreen</li>
                                <li>View Live Camera Feed</li>
                                <li>Full Control of HERO6 Black</li>
                                <li>Use App for Dedicated Camera
                                    Operation</li>
                            </ul> -->
                        </div>
                    </div>
                    <div class="col-lg-6 col-12">
                        <div class="info-body">
                            <h4>Specifications</h4>
                            <ul class="normal-list">
                                <li><span></span>{{obj.descriptionone}}</li>
                                <li><span></span> {{obj.descriptiontwo}}</li>
                                <li><span></span> {{obj.descriptionthree}}</li>
                                <li><span></span> {{obj.descriptionfour}}</li>
                                <!-- <li><span>Maximum Speed:</span> 35 mph
                                    (15 m/s)</li>
                                <li><span>Maximum Distance:</span> Up to
                                    9,840ft (3,000m)</li>
                                <li><span>Operating Frequency:</span>
                                    2.4GHz</li>
                                <li><span>Manufacturer:</span> GoPro,
                                    USA</li> -->
                            </ul>
                            
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="row">
                <div class="col-lg-4 col-12">
                    <div class="single-block give-review">
                        <h4>4.5 (Overall)</h4>
                        <ul>
                            <li>
                                <span>5 stars - 38</span>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                            </li>
                            <li>
                                <span>4 stars - 10</span>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star"></i>
                            </li>
                            <li>
                                <span>3 stars - 3</span>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                            </li>
                            <li>
                                <span>2 stars - 1</span>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                            </li>
                            <li>
                                <span>1 star - 0</span>
                                <i class="lni lni-star-filled"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                                <i class="lni lni-star"></i>
                            </li>
                        </ul>

                        <button type="button" class="btn review-btn"
                            data-bs-toggle="modal"
                            data-bs-target="#exampleModal">
                            Leave a Review
                        </button>
                    </div>
                </div>
                <div class="col-lg-8 col-12">
                    <div class="single-block">
                        <div class="reviews">
                            <h4 class="title">Latest Reviews</h4>

                            <div class="single-review">
                                <img
                                    src="{% static 'assets/images/blog/comment1.jpg' %}"
                                    alt="#">
                                <div class="review-info">
                                    <h4>Awesome quality for the price
                                        <span>Jacob Hammond
                                        </span>
                                    </h4>
                                    <ul class="stars">
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                    </ul>
                                    <p>Lorem ipsum dolor sit amet,
                                        consectetur adipiscing elit, sed
                                        do eiusmod
                                        tempor...</p>
                                </div>
                            </div>


                            <div class="single-review">
                                <img
                                    src="assets/images/blog/comment2.jpg"
                                    alt="#">
                                <div class="review-info">
                                    <h4>My husband love his new...
                                        <span>Alex Jaza
                                        </span>
                                    </h4>
                                    <ul class="stars">
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni lni-star"></i></li>
                                    </ul>
                                    <p>Lorem ipsum dolor sit amet,
                                        consectetur adipiscing elit, sed
                                        do eiusmod
                                        tempor...</p>
                                </div>
                            </div>


                            <div class="single-review">
                                <img
                                    src="assets/images/blog/comment3.jpg"
                                    alt="#">
                                <div class="review-info">
                                    <h4>I love the built quality...
                                        <span>Jacob Hammond
                                        </span>
                                    </h4>
                                    <ul class="stars">
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                        <li><i class="lni
                                                lni-star-filled"></i></li>
                                    </ul>
                                    <p>Lorem ipsum dolor sit amet,
                                        consectetur adipiscing elit, sed
                                        do eiusmod
                                        tempor...</p>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div> -->
        </div>
    </div>
</section>


<!-- <div class="modal fade review-modal" id="exampleModal" tabindex="-1"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Leave a
                    Review</h5>
                <button type="button" class="btn-close"
                    data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="review-name">Your Name</label>
                            <input class="form-control" type="text"
                                id="review-name" required>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="review-email">Your Email</label>
                            <input class="form-control" type="email"
                                id="review-email" required>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="review-subject">Subject</label>
                            <input class="form-control" type="text"
                                id="review-subject" required>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="review-rating">Rating</label>
                            <select class="form-control"
                                id="review-rating">
                                <option>5 Stars</option>
                                <option>4 Stars</option>
                                <option>3 Stars</option>
                                <option>2 Stars</option>
                                <option>1 Star</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="review-message">Review</label>
                    <textarea class="form-control" id="review-message"
                        rows="8" required></textarea>
                </div>
            </div>
            <div class="modal-footer button">
                <button type="button" class="btn">Submit Review</button>
            </div>
        </div>
    </div>
</div> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

  <script src="https://unpkg.com/xzoom/dist/xzoom.min.js"></script>
  <!-- jQery -->
  <script src="js/jquery-3.4.1.min.js"></script>
  <!-- bootstrap js -->
  <script src="js/bootstrap.js"></script>
  <!-- custom js -->
  <script src="js/custom.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
  
      function wishList(id){        
          var data  = {'id': id,  "csrf_token": '{{csrf_token}}'} 
          console.log("entered wish func")
          $.ajax({
              url : "{% url 'add_wishlist'  %}",
              method: "POST",
              data : data,
              success : function(data){
                  
                  let msg = data.success
                  let quantity = data.wish_items
                  let errorMsg = data.error
                  if(msg && quantity ){
                      document.getElementById('wishCount').innerText = quantity   
                      Toastify({    
                          text: "Item added to wishlist",
                          duration: 3000,
                          style: {
                              background: "linear-gradient(to right, #696969 , #ffa500)",
                            }
                          }).showToast(); 
                  }else{
                      swal({
                          position :'top-end',
                          icon: "error",
                          text: "you must be logged in to add products to whishlist",
                          timer:3000
                        });
                  }
                  
              }
          })
      }
  
  </script>

  <script>
    $(".xzoom, .xzoom-gallery").xzoom({tint: '#333', Xoffset: 15});
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

  <script src="https://unpkg.com/xzoom/dist/xzoom.min.js"></script>
  <!-- jQery -->
  <script src="js/jquery-3.4.1.min.js"></script>
  <!-- bootstrap js -->
  <script src="js/bootstrap.js"></script>
  <!-- custom js -->
  <script src="js/custom.js"></script>


  <script>
    $(".xzoom, .xzoom-gallery").xzoom({tint: '#333', Xoffset: 15});
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.6.1/toastify.js" integrity="sha512-MnKz2SbnWiXJ/e0lSfSzjaz9JjJXQNb2iykcZkEY2WOzgJIWVqJBFIIPidlCjak0iTH2bt2u1fHQ4pvKvBYy6Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.6.1/toastify.css" integrity="sha512-VSD3lcSci0foeRFRHWdYX4FaLvec89irh5+QAGc00j5AOdow2r5MFPhoPEYBUQdyarXwbzyJEO7Iko7+PnPuBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script>

    function wishList(id){  
        console.log("entered wishlist");      
        var data  = {'id': id,  "csrf_token": '{{csrf_token}}'} 
        console.log("entered wish func")
        $.ajax({
            url : "{% url 'add_wishlist'  %}",
            method: "POST",
            data : data,
            success : function(data){
                
                let msg = data.success
                let quantity = data.wish_items
                let errorMsg = data.error
                if(msg && quantity ){
                    window.location.reload();
                    Toastify({    
                        text: "Item added to wishlist",
                        duration: 3000,
                        style: {
                            background: "linear-gradient(to right, #696969 , #ffa500)",
                          }
                        }).showToast();
                        
                }else{
                    swal({
                        position :'top-end',
                        icon: "error",
                        text: "you must be logged in to add products to whishlist",
                        timer:3000
                      });
                }
                
            }
        })
    }

</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
function removeWishItem(prod_id){
  var data = { 'prodId' : prod_id }	
console.log('data of remove wish item',data)
  Swal.fire({
    title: 'Remove Item?',
    text: "Are you sure want to remove this? You will not be able to revert this..",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Remove Item'
  }).then((result) => {
    if (result.isConfirmed) {
      $.ajax({		
        method: "GET",
        url: "{% url 'remove_wish_item' %}",
        data : data,
        success:function(response){
      console.log('removed successfully')

          Swal.fire(
            'Item removed',
            'Item has been successfully removed from cart.',
            'success'
          )
        location.reload();

        }
      })
     
    }
  })
}
</script>
{% endblock %}



